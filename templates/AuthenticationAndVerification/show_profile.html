<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Bloggin pool | {{username}}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap core CSS -->
    <link
      rel="stylesheet"
      href="{% static 'bootstrap_material_design/css/bootstrap.min.css' %}"
    />
    <!-- Material Design Bootstrap -->
    <link
      rel="stylesheet"
      href="{% static 'bootstrap_material_design/css/mdb.min.css' %}"
    />
    <!-- Your custom styles (optional) -->
    <script src="{% static 'bootstrap_material_design/js/bootstrap.min.js' %}"></script>
    <link rel="icon" type="image/png" href="{% static 'images/logo.png' %}" />
      {% if username %}
      <link rel="stylesheet" href="{% static 'css/show_profile.css' %}"/>
      {% endif %}
    <style>
      .btn {
        padding: 10px;
        margin: 0px;
        text-transform: unset !important;
      }
    </style>
  </head>
  <body>
    {% if user_not_found %}
    {% include '../error_templates/404.html' %}
    {% else %}
      <div class="w-100 m-0 p-0" align="center">
        <div class="bg-dark pt-3 pb-5 inner_container_main">
          <div class="w-100 row">
            <div class="col-lg-6 col-md-12 mt-3" align="center">
              <h1><b class="text-light"><span style="color: #4285f4;">B</span>loggingpool</b></h1>
            </div>
            <div class="col-lg-6 col-md-12 mt-3" align="center">
              <a class="btn btn-primary" href="{% url 'main_blog_page' %}" style="font-size: 17px;"><i class="fa fa-arrow-left">&nbsp;</i> Main Page</a>
            </div>
          </div>
          <hr class="bg-light">
          <div class="row w-100">
            <div class="col-lg-6 col-md-12 mt-3">
              <div id="image_view">
                {% if image_url %}
                  <img height="300" width="300" style="object-fit: cover;" src="{{image_url}}">
                {% else %}
                  <img height="300" width="300" style="object-fit: cover;" src="{% static 'images/user_icon.png' %}"/>
                {% endif %}
              </div>
              <h2 id="image_bottom_name" class="text-light mt-4">{{username}}</h2>
            </div>
            <div class="col-lg-6 col-md-12 mt-3">
              <div class="text-light" id="details" align="center">
                <h1>{{fullname}}</h1>
                <div class="w-100">
                  <p class="text-primary" style="font-size: 25px;">About</p>
                  <p class="text-light pb-3" style="border-bottom: 1px solid white;">{{about}}</p>
                  <div class="container text-light">
                    {% if contact_mail and contact_email != "None" %}
                      <p class="pb-3" style="border-bottom: 1px solid white;"><span class="text-primary">Contact mail: &nbsp; &nbsp;</span> {{contact_email}} &nbsp; &nbsp;<i class="fa fa-clone text-primary" style="cursor: pointer;" aria-hidden="true"></i></p>
                    {% endif %}
                    {% if website_link and website_link != "None" %}
                      <p class="pb-3" style="border-bottom: 1px solid white;"><span class="text-primary">Website link: &nbsp; &nbsp;</span> <a href="{{website_link}}" target="_blank">{{website_link}}</a> </p>
                    {% endif %}
                    {% if about %}
                      {% if instagram_profile != "None" or facebook_profile != "None" or twitter_profile != "None" %}
                        <p class="text-primary" style="font-size: 20px;">Social media accounts</p>
                      {% endif %}
                    {% endif %}
                    <div>
                      {% if instagram_profile and instagram_profile != "None" %} 
                        <a class="mr-5" href="{{instagram_profile}}" target="_blank"><img class="social_image" height="40" src="{% static 'images/instagram.png' %}"></a>
                      {% endif %} 
                      {% if facebook_profile and facebook_profile != "None" %}
                        <a class="mr-5" href="{{facebook_profile}}" target="_blank"><img class="social_image" height="40" src="{% static 'images/facebook.png' %}"></a>
                      {% endif %}
                      {% if twitter_profile and twitter_profile != "None" %}
                        <a  href="{{twitter_profile}}" target="_blank"><img class="social_image" height="40" src="{% static 'images/twitter.png' %}"></a>
                      {% endif %}
                    </div>
                    {% if about %}
                      <hr class="bg-light">
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% if blogs %}
        <div class="inner_container_main mt-4 bg-dark" style="height: 900px;" align="start">
          <h1 class="text-light ml-5 pt-3">Blogs</h1>
          <hr class="bg-light">
          <div class="row p-0 m-0" id="blogs_container">
          </div>
        </div>
        {% endif %}
      </div>

      <script>
    function append_related_blogs()
    {
        {% if blogs %}
            {% for blog in blogs %}
                    var card_id = "upper_"+"{{blog.id}}";
                    $("#blogs_container").append("<div class='col-sm shadow p-0 ml-auto mr-auto mt-5' id='"+card_id+"' style='max-width: 16rem; min-width: 16rem; max-height: 390px; min-height: 390px;'></div>");
                    var card_id_inner = "inner_"+"{{blog.id}}";
                    $("#"+card_id).append("<div class='card border-0 p-0 m-0' style='width: 100%;' id='"+card_id_inner+"'></div>")
                    var image = "{{blog.banner_image_url}}";
                    $("#"+card_id_inner).append("<div class='card_image embed-responsive embed-responsive-16by9 border'><img class='card-img-top embed-responsive-item' src='"+image+"' alt='Card image cap'></div>")
                    $("#"+card_id_inner).append("<div class='container p-2 card_content'><h6 class='text-justify' style='max-height: 50px; min-height: 50px; overflow-y: hidden; '>"+`{{blog.heading}}`+"</h6><hr class='m-2'><p class='text-justify scroll_para' style='max-height: 100px; min-height: 100px; font-size: 13px; overflow-y: scroll;'>"+`{{blog.description}}`+"</p></div>");
                    var id = "{{blog.id}}";
                    var url_mask = "{% url 'blog_view' id_=12345 %}".replace(/12345/, id.toString());
                    $("#"+card_id_inner).append("<div class='container mb-3'><div class='float-left w-50 pr-3'><div class='w-100 m-0 row'><i class='fa fa-thumbs-up col-sm-inline m-auto' style='color: #5B6068; font-size: 20px;'></i><i class='fa fa-comment-o col-sm-inline p-0 m-auto' style='color: #5B6068; font-size: 20px;'></i><i class='fa fa-eye col-sm-inline m-auto p-0' style='color: #5B6068; font-size: 20px;'></i> </div><div class='w-100 m-0 inline row'><i class='m-auto col-sm-inline' style='color: #5B6068; font-size: 12px;'><b>"+"{{blog.likes}}"+"</b></i><i class='m-auto col-sm-inline' style='color: #5B6068; font-size: 12px;'><b>"+"{{blog.comments}}"+"</b></i><i class='m-auto col-sm-inline' style='color: #5B6068; font-size: 12px;'><b>"+"{{blog.views}}"+"</b></i></div></div><div class='float-right'><a type='button' href='"+url_mask+"' class='btn btn-dark float-right'>read</a></div></div>");
            {% endfor %}
        {% endif %}
    }
    append_related_blogs();
  </script>


    {% endif %}
  </body>
</html>
